<?php
const RIGHT = 3;
const DOWN = 1;

$posX = 0;
$posY = 0;
$trees = 0;

$slope = [
  '.#..#....##...#....#.....#.#...',
  '........##....#..#..##....#.#..',
  '......##......##.........#....#',
  '...#.....#....##.......#.#....#',
  '.#.###.#.#..#.....##..#....#.#.',
  '##.........##.....####......#..',
  '#...#..........#.##............',
  '####............#..........#.#.',
  '......#......#....##...#..##...',
  '#..#....#...#......#......####.',
  '......#..........#.........#.#.',
  '...##.......#..#.#..#..#....#..',
  '..####....#.#...............##.',
  '...###........#.....#..........',
  '#..#.##...##.#..##...##...#....',
  '.###........#.##..#.#.....#....',
  '.#.......#..##.......#......#..',
  '.##...........#..............#.',
  '...#..#.....#...........#...#..',
  '.....#..............#..#.......',
  '.......#....#.....##...........',
  '.#...#.............#.....##....',
  '....#.#....#...#...#..#..##.#..',
  '...#..##..##...#..##........#.#',
  '.###..#...#.#.#.#..#...#.......',
  '.....##.#.##.#.#.......#..#....',
  '.##.#...#.....#...#....#.....#.',
  '.....#......###....###..##.#..#',
  '.....#..##....#..#.#..#.#.#....',
  '#....#.....#.#.......#...#....#',
  '...#........#............#..#..',
  '#.#...#...#..##.........#...##.',
  '.#..#.#...........#....#...#...',
  '##..#.#..........#.....###...#.',
  '#..#........#.......#.#..#....#',
  '..#...##....#..#....#....#.....',
  '...#.....##....#...#..#....##.#',
  '.....#......#...#.#.#.#.#......',
  '###.....#..#.#..........##.#...',
  '...............#..#...#.#....#.',
  '#.....#.....###....#..........#',
  '........#...#.#.......#..#...#.',
  '..#.##...#...#...#.........#...',
  '#..........#..#.#...........##.',
  '##.......#.#.#...#.....#.......',
  '...#.#.#.....#......#....##..#.',
  '##.#.....#....#...#.......#....',
  '.#......##..#.##.#....##..##.#.',
  '..#..#......#....#...#..#.#....',
  '...#..###...#.......#..#.......',
  '...#....#..#....#........##....',
  '#...#...#....#.#.........###.#.',
  '.#.........##..##...#..........',
  '...##.....##.........#..#..#...',
  '###....#......#.##..#...#......',
  '.###....#.#.......#..#....#...#',
  '....####........##....#.#....##',
  '..#.....#......##...#..#..#....',
  '...#....#...#......#.###.#.#.#.',
  '......#.......#..#...#...#.....',
  '.#...#...#..#.#..........#.....',
  '........#..#.........#.#....##.',
  '.#....#.......#........#.##.#..',
  '...#...#..#.....#......#...##..',
  '.#.................#........###',
  '.......#.#..#.#...#............',
  '.#.......#..##...#.###....#.##.',
  '#........#.###.#..#........##..',
  '..##.#....##......##........#..',
  '...............#...............',
  '#.......#......##..#.#....#.#.#',
  '..#.....#......#.#.#...#...##..',
  '..........#........#.....##...#',
  '#..........#.#..#..##..#......#',
  '.......#..###..##.#..##........',
  '#.#..##..###..#.###.....#.#..##',
  '..#.#........#...###...##......',
  '.......##.....##...#.##........',
  '.#.#...###..#..#......##....##.',
  '#...#.#.....##..#..#..#.#....#.',
  '........#......#....#..#.......',
  '...#.#.#.#........###....#...#.',
  '.#......#...#.......#......#...',
  '#...#.##.#..#.#..#.........#...',
  '....#......##......#........#.#',
  '..##.#.....#..#......#..#......',
  '#.##...##...#................#.',
  '.....#..#....#....#####........',
  '....#..#..#.#...#.#............',
  '.........#.#....#..#....##...#.',
  '#....#..........#......#......#',
  '.......#..............#......#.',
  '.#..#...#..#.#.....#.#.#.##.#..',
  '.##........#......#...#.##.....',
  '...#.##..#........#...........#',
  '..#...#..#........#.......#.#..',
  '#.....#..#.#..#..#...#...#..#..',
  '..................#.#.....#...#',
  '........#...##.#..#.........#..',
  '.#...##.#...........##.##...#..',
  '#......#.........#...#...#...#.',
  '..........#.............#...#..',
  '#............##.#..#...#.#...#.',
  '..#.##...##....##.#...####...#.',
  '#.##..#......#.......#.#...##..',
  '.....#...#..#......#####.##..#.',
  '#...#.#.##..#..##.....#......#.',
  '.#..#......#.#.#...#.#...##.#..',
  '.#.....#..##........#.....#...#',
  '.................#..........#..',
  '##.#.#......#.####..#.....#....',
  '.#...##.####..#...#............',
  '..#...............###....#....#',
  '#...#..###..#.#.##...........##',
  '...................#..#.....#..',
  '...#.##.#...#.....#......#.##..',
  '#.#...#.........##.#........#.#',
  '.##.......#..#..#.....##....#..',
  '......##.#.#..#...#.#..##.....#',
  '..#..###...#...#......#.#......',
  '..##....#.#...#....#....#..#..#',
  '#..##....#........#..##..#..#.#',
  '.......#............#....##..#.',
  '.#.#..#.........#.#.##......#..',
  '#.#....#..##..#..###.#.....##..',
  '.###.#......#.....#####...#....',
  '#...#.#...##......#...#.#...##.',
  '#..#.........#..#............#.',
  '...##......##.......##....##...',
  '...#...##....###..###.#...#....',
  '#.#....#...#.#...##..#........#',
  '.#..#..................#....#..',
  '#......#..#...##..##...#..##..#',
  '...#..#.....#...#........#.#.#.',
  '#...#..##....#.....#........#..',
  '.##..#....#.....#.#............',
  '##..##.#.#.##.#.#..#.#..#....#.',
  '#.......#...............#.....#',
  '..#.....#..##.....#...##.##....',
  '...#..#...#.#.#....#......#....',
  '###.#.......#....#....#.#...#..',
  '.....###..#...###.#.#..#.......',
  '.....#.........##.#....#..##.#.',
  '........#....#....#....#.#..##.',
  '........###....#.#.........#.#.',
  '.#..###..#........#.......##.#.',
  '.#.#...........................',
  '..#....##...#.#....#....#.#....',
  '.#...#...##.#........###....#..',
  '#.#....#...#.#.#...##......##..',
  '#......#....#...#..#....#...#..',
  '...#..##........#.#...##......#',
  '....##...........##...#..#..#..',
  '......#..#........#..#....##.##',
  '.###..#.#.........#.....#......',
  '.#..##............#......#.....',
  '..##.#.#..#..#.###....#..#..#..',
  '....#.#..#.#..##...##.#.#.#.#..',
  '....#..#....#...............#..',
  '..#...#.##.....##....#..##..#..',
  '.......##.#....#.##....#.......',
  '.#...#........#...#......#.###.',
  '..#....##.......#....#.#...#.#.',
  '.....#.....#...##..#....#.#..##',
  '..##........##............##...',
  '..........#...#.......#.......#',
  '.#...............#...#.##......',
  '#.##......#....#.##.#..#..#...#',
  '......###.........#...#..#....#',
  '....#......#...#....#....#...#.',
  '#...##...#....#......####....#.',
  '.................#......#......',
  '..#..........##.......##..#.##.',
  '.#.....#.......#...######..#..#',
  '....##.#...#...#..........#....',
  '.....#.......#...#.#.......###.',
  '#...#.###.....#...#.......#....',
  '.#.##.####....#.....#.#........',
  '.......#.....##............##..',
  '..#...#.#.##........#...##...#.',
  '........#...####.##..#....#...#',
  '#.......#...##.#......#..#...#.',
  '......#.........#..###.#.#....#',
  '#..##...#...#..#...#...#.....#.',
  '.#...#...#.#.................##',
  '#......#.....#..#.#..#......##.',
  '.......#.##...#.......#.......#',
  '.#.#..#..#......#....#.#...#.#.',
  '..#...#.#..#......#...#.#.#....',
  '........#..............#..##...',
  '.##..#..##.#....#.#..###..#..#.',
  '..#....#......#...#.#.#....#...',
  '...#..#..#....#..#.....##......',
  '.#......#...#........##........',
  '.#......#..#...##..#..#.#.#....',
  '.##......#.##.........#....#...',
  '....#....##..#..###.#..#......#',
  '....#....##..........#.#...#...',
  '..##.#.............#..#.....#..',
  '..#.....#....#....#.......##...',
  '.##.#....#....#...#....##.#....',
  '...#.#..#.###.#..#.#.......#.#.',
  '.....##.....#.......#......#...',
  '.#.....#..#.#.#..#........##...',
  '##.....................#.......',
  '..###............#........##..#',
  '.#.##.....#..#..#..#.#.......#.',
  '.##...................#..#..#..',
  '..#.#...#..........##..#..##...',
  '#......#..#..#.#..#......#..#.#',
  '.#...#....#.#.........#.....#.#',
  '#..........#.#....#....#.#.#.#.',
  '#.....#..........#..#....#..#..',
  '........#....#..##.#.#.......#.',
  '.#.......##.......#..##...#....',
  '...#..##..#......##.#..#.#..#..',
  '.#..#.......#..##..#......#....',
  '###.#.........#......#.#.......',
  '...#......#....#..##..#.#..#...',
  '......#..#.....#.........#....#',
  '....#..#..#..#.........##.#..#.',
  '......#..#..#..#....#...#..##.#',
  '......##.#..#..#.#.......#.#.##',
  '..#.....#...#..#....#..........',
  '.##..##.....##.......#.##.#....',
  '...#..#.......#..#.......#.....',
  '.........#....##..#.#....#.#...',
  '.....#..#...#.........#....#..#',
  '.........##.....#.#...#.###...#',
  '.#......####..##...#..#........',
  '.#......##....#.....#..........',
  '##.......##.#.......#..........',
  '.#......#.#.#.#....#........#..',
  '......##..##...#...#...........',
  '.#...#.#..#......#.#.#.#....#.#',
  '...#.........#.....#...###.....',
  '#.....##....#.##...#....#......',
  '.#..#...#..##.###.#.#.#...#....',
  '...#......#..#....#...#...#....',
  '.#..............#.....#........',
  '..##...#.....#..#.....#..#.#...',
  '.##...#....#.##...#.........##.',
  '..#......#...##..#.....#......#',
  '#.#..............#...#...#..#.#',
  '..#..#.#...........#...#.#.#...',
  '#..........#...#..#..##..#....#',
  '............#...#........###...',
  '.........#.....#.....#..#......',
  '#...#.#..##......#.#####.......',
  '...#........#..............#...',
  '......###.#.#.....#..#....##.#.',
  '.#.#.#..##....###.#..#....##...',
  '.#....#.##............##.#.....',
  '##...##.#......#.#.##.##...###.',
  '.......#.#........#.....#......',
  '....#.....#......#...#.#..#....',
  '.#.........#....#...#...#...#.#',
  '#.......#................#..#..',
  '.##...........#.##...##....#...',
  '#...#.#...###.........#.......#',
  '.#...#.........................',
  '#.......#...#.....##.##...##...',
  '.#.#....#.......#.#.##.#....#..',
  '#..#....#...#.#.##.#....#....#.',
  '.##.....#.#..#...#..#..........',
  '.............#...#.#..#........',
  '....#........#..#......##......',
  '#.....#....#.....#.......#.....',
  '........#.......##....#........',
  '.#.#..##.......................',
  '##..#.....#........#.....#.....',
  '.#......#.#...#.#..........#..#',
  '.#..#.....#..#..........#.###..',
  '......#.#..#.#.......#.#.....#.',
  '.#....#......#..##.............',
  '#...##.........#.#.#...#.....#.',
  '..#................#..#..###...',
  '#.....#....##.#..##......#.#.#.',
  '..#....#...#...#...............',
  '#................#....#...#.#..',
  '................#...#.....#.##.',
  '..#.#.#..#.##.......##.......##',
  '...........#......##.......###.',
  '...#.......##.........#.#.#.#..',
  '.#...#.#..#...#.#.....#........',
  '............#####......##......',
  '....###....#.##...#..#.........',
  '..#.#...#.......#...#...#.###..',
  '..............##..#...#....#...',
  '#.#..##...#....##.........#....',
  '..#...#.....#...........#...#..',
  '#.#..###..#.#..#........#..#.#.',
  '...###...##...#...#.#.........#',
  '..#........#.....#.#.#.......#.',
  '...#..#..........#.....#...#...',
  '....#..#.....#....##....#.##...',
  '.....##..#...#.#..##...#...##.#',
  '...........###...##....#.......',
  '##..#.#..#..#...#....##..#..#..',
  '##...#.#......##.#..#...#....#.',
  '.#.......#...........#...#.....',
  '#...#....#.......#...#.##......',
  '.........#.......#...#.#...#...',
  '.......##.#..................#.',
  '........#..#.#......#.....#....',
  '.....#.#.#.#....##...#.###.....',
  '#.#.........#..#.#.#.#.#.......',
  '.............#....#.......###..',
  '.#.##....#....##.........####..',
  '...........###.#...............',
  '#.........##.#.#..#.....##.###.',
  '.#.#.....#.#...#.....##...#...#',
  '#....#...#.........#.#.......#.',
  '.....#.###..#....#...##..#...#.',
  '#........#....#.#..#....#.#....',
  '#.#..##......#.........#.#.....',
  '##..#.....#......###....#....#.',
  '#.#.####..#.#.#......##...#..#.',
  '....#.....#.#.#.#.....#........',
  '..##..........#......#.#.#..#..',
  '.#...##.##.........#.........##',
  '..#.#.#..........#..#..#......#',
  '###..###..#...#................',
];

$repeat = strlen($slope[0]);

collect($slope)->map(function ($line) use (&$posX, &$posY, &$trees, $repeat) {
  if ($posX >= $repeat) {
    $posX -= $repeat;
  }
  if (str_split($line)[$posX] === '#') {
    $trees++;
  }
  $posX += RIGHT;
  $posY += DOWN;
});

$trees;
